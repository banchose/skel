services:
    sftpgo:
      labels:
        - "traefik.enable=true"
        - "traefik.http.routers.sftpgo.rule=Host(`sftpgo.xaax.dev`)"
        - "traefik.http.routers.sftpgo.entrypoints=websecure"
        - "traefik.http.routers.sftpgo.tls=true"
        - "traefik.http.services.sftpgo.loadbalancer.server.port=8080"
        - "traefik.docker.network=traefik_web"
        - "traefik.http.middlewares.sftpgo-health.healthcheck.path=/healthz"
        - "traefik.http.middlewares.sftpgo-health.healthcheck.interval=30s"
        - "traefik.http.middlewares.sftpgo-health.healthcheck.timeout=5s"
        - "traefik.http.routers.sftpgo.middlewares=sftpgo-health@docker"

      networks:
        - traefik_web
      volumes:
        - sftpgo_data:/var/lib/sftpgo
        - sftpgo_config:/etc/sftpgo
        - sftpgo_home:/srv/sftpgo/data

volumes:
  sftpgo_data:
  sftpgo_config:
  sftpgo_home:

networks:
  traefik_web:
    external: true
